var APP_DETAIL = {
  "tabs": [
    {
      "target": "#application-details-01",
      "label": "ผู้มีรายได้ประจำ"
    },
    {
      "target": "#application-details-02",
      "label": "เจ้าของกิจการ"
    },
    {
      "target": "#application-details-03",
      "label": "ผู้ประกอบอาชีพอิสระ"
    },
    {
      "target": "#application-details-04",
      "label": "ผู้มีเงินออม"
    },
    {
      "target": "#application-details-05",
      "label": "ผู้ใช้บัญชีเงินค้ำประกัน"
    }
  ],
  "contents": [
    {
      "id": "application-details-01",
      "qualification": {
        "left_col": [
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) คนไทย",
            "list": [
              "รายได้ 15,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) ต่างชาติ",
            "list": [
              "รายได้ 50,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "อายุบัตรหลัก",
            "list": [
              "20-80 ปี"
            ]
          }
        ],
        "right_col": [
          {
            "title": "อายุบัตรเสริม",
            "list": [
              "15 ปี"
            ]
          },
          {
            "title": "อายุงาน / อายุกิจการ (บัตรหลัก)",
            "list": [
              "6 เดือน"
            ]
          }
        ]
      },
      "document": {
        "left_col": [
          {
            "title": "เอกสารแสดงตัวตน",
            "list": [
              "สำเนาบัตรประชาชนที่ยังไม่หมดอายุ หรือ",
              "สำเนาบัตรประจำตัวข้าราชการที่ยังไม่หมดอายุ พร้อมสำเนาทะเบียนบ้าน",
              "สำเนาใบเปลี่ยนชื่อ (ถ้ามี)",
              "หนังสือเดินทางที่ยังไม่หมดอายุ (ต่างชาติ)",
              "เอกสารวีซ่าที่ยังไม่หมดอายุ (ต่างชาติ)"
            ]
          }
        ],
        "right_col": [
          {
            "title": "เอกสารแสดงรายได้",
            "list": [
              "สลิปเงินเดือน 1 เดือน (อายุเอกสารไม่เกิน 3 เดือน)<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/payslip.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้มีรายได้ประจำ - ตัวอย่างสลิปเงินเดือน'>ตัวอย่างสลิปเงินเดือน</a>",
              "หนังสือรับรองเงินเดือน (อายุเอกสารไม่เกิน 3 เดือน) พร้อมสำเนา Statement ย้อนหลัง 6 เดือน<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/salarycertificate.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้มีรายได้ประจำ - ตัวอย่างหนังสือรับรองเงินเดือน'>ตัวอย่างหนังสือรับรองเงินเดือน</a><br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/statement.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้มีรายได้ประจำ - ตัวอย่างสำเนาการเดินบัญชี'>ตัวอย่างสำเนาการเดินบัญชี (Statement)</a>",
              "เอกสาร 50ทวิ ปีล่าสุด หรือ กรณี 50 ทวิแบบรายเดือน ใช้ย้อนหลังอย่างน้อย 6 เดือน (ต้องมีตราประทับพร้อมลายเซ็นผู้จ่ายเงิน)<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/50bis.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้มีรายได้ประจำ - ตัวอย่างหนังสือรับรองการหักภาษี'>ตัวอย่างหนังสือรับรองการหักภาษี ณ ที่จ่าย (50 ทวิ)</a>",
              "กรณีเงินเดือนน้อยกว่าเกณฑ์รายได้ขั้นต่ำ สามารถ รวมรายได้อื่น ๆ เพิ่มเติมได้ เช่น ค่าคอมมิชชั่น ค่าล่วงเวลา เป็นต้น",
              "ยื่นสลิปเงินเดือน 1 เดือน (อายุเอกสารไม่เกิน 3 เดือน) พร้อม Statement (ที่เงินเดือนเข้า) ย้อนหลัง 6 เดือนเพิ่มเติม"
            ]
          }
        ],
        "remark": {
          "title": "หมายเหตุ :",
          "list": [
            "กรณีมีบัญชีเงินเดือนกับธนาคารกสิกรไทย (KBank Payroll) ตั้งแต่ 7 เดือนขึ้นไป ไม่ต้องยื่นเอกสารแสดงรายได้"
          ]
        }
      }
    },
    {
      "id": "application-details-02",
      "qualification": {
        "left_col": [
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) คนไทย",
            "list": [
              "รายได้ 15,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) ต่างชาติ",
            "list": [
              "รายได้ 50,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "อายุบัตรหลัก",
            "list": [
              "20-80 ปี"
            ]
          }
        ],
        "right_col": [
          {
            "title": "อายุบัตรเสริม",
            "list": [
              "15 ปี"
            ]
          },
          {
            "title": "อายุงาน / อายุกิจการ (บัตรหลัก)",
            "list": [
              "1 ปี"
            ]
          }
        ]
      },
      "document": {
        "left_col": [
          {
            "title": "เอกสารแสดงตัวตน",
            "list": [
              "สำเนาบัตรประชาชนที่ยังไม่หมดอายุ",
              "หนังสือเดินทางที่ยังไม่หมดอายุ (ต่างชาติ)",
              "เอกสารวีซ่าที่ยังไม่หมดอายุ (ต่างชาติ)",
              "สำเนาใบคำขอจดทะเบียน / หนังสือจัดตั้งคณะบุคคล<br/>(กรณีจดทะเบียนในนาม ห้างหุ้นส่วนสามัญ/คณะบุคคล)"
            ]
          }
        ],
        "right_col": [
          {
            "title": "เอกสารแสดงรายได้",
            "list": [
              "Statement ย้อนหลัง 6 เดือน<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/statement.jpg' class='link external open-popup-image pxtm-click-openPopup' title='เจ้าของกิจการ - ตัวอย่างสำเนาการเดินบัญชี'>ตัวอย่างสำเนาการเดินบัญชี (Statement)</a>"
            ]
          }
        ],
        "remark": {
          "title": "หมายเหตุ :",
          "list": [
            "กรณีเดินบัญชีกับธนาคารกสิกรไทย ตั้งแต่ 6 เดือนขึ้นไป ไม่ต้องยื่นเอกสารแสดงรายได้"
          ]
        }
      }
    },
    {
      "id": "application-details-03",
      "qualification": {
        "left_col": [
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) คนไทย",
            "list": [
              "รายได้ 15,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "รายได้ขั้นต่ำ (บัตรหลัก) ต่างชาติ",
            "list": [
              "รายได้ 50,000 บาท / เดือน ขึ้นไป"
            ]
          },
          {
            "title": "อายุบัตรหลัก",
            "list": [
              "20-80 ปี"
            ]
          }
        ],
        "right_col": [
          {
            "title": "อายุบัตรเสริม",
            "list": [
              "15 ปี"
            ]
          },
          {
            "title": "อายุงาน / อายุกิจการ (บัตรหลัก)",
            "list": [
              "1 ปี"
            ]
          }
        ]
      },
      "document": {
        "left_col": [
          {
            "title": "เอกสารแสดงตัวตน",
            "list": [
              "สำเนาบัตรประชาชนที่ยังไม่หมดอายุ หรือ",
              "หนังสือเดินทางที่ยังไม่หมดอายุ (ต่างชาติ)",
              "เอกสารวีซ่าที่ยังไม่หมดอายุ (ต่างชาติ)"
            ]
          }
        ],
        "right_col": [
          {
            "title": "เอกสารแสดงรายได้",
            "list": [
              "เอกสาร 50 ทวิ ปีล่าสุด หรือ กรณี 50 ทวิแบบรายเดือนใช้ย้อนหลังอย่างน้อย 6 เดือน (ต้องมีตราประทับพร้อมลายเซ็นผู้จ่ายเงิน)<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/50bis.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้ประกอบอาชีพอิสระ - ตัวอย่างหนังสือรับรองการหักภาษี ณ ที่จ่าย (50 ทวิ)'>ตัวอย่างหนังสือรับรองการหักภาษี ณ ที่จ่าย (50 ทวิ)</a>"
            ]
          }
        ]
      }
    },
    {
      "id": "application-details-04",
      "qualification": {
        "left_col": [
          {
            "title": "อายุบัตรหลัก",
            "list": [
              "20-80 ปี"
            ]
          },
          {
            "title": "อายุบัตรเสริม",
            "list": [
              "15 ปี"
            ]
          }
        ],
        "right_col": [
          {
            "title": "คุณสมบัติอื่น",
            "list": [
              "ต้องมีเงินฝากออมทรัพย์และหรือเงินฝากประจำ 1,000,000 บาท ไม่น้อยกว่า 6 เดือน",
              "ต้องมีเงินฝากประจำและหรือเงินฝากออมทรัพย์ 2,000,000 บาท ไม่น้อยกว่า 12 เดือน (ต่างชาติ)",
              "ต้องระบุลักษณะอาชีพ : พ่อบ้าน / แม่บ้าน"
            ]
          }
        ]
      },
      "document": {
        "left_col": [
          {
            "title": "เอกสารแสดงตัวตน",
            "list": [
              "สำเนาบัตรประชาชนที่ยังไม่หมดอายุ",
              "หนังสือเดินทางที่ยังไม่หมดอายุ (ต่างชาติ)",
              "เอกสารวีซ่าที่ยังไม่หมดอายุ (ต่างชาติ)"
            ]
          }
        ],
        "right_col": [
          {
            "title": "เอกสารแสดงรายได้",
            "list": [
              "Statement บัญชีเงินฝากออมทรัพย์ / ประจำ / บัญชีกองทุน ย้อนหลัง 6 เดือน<br/><a href='../../../../SiteCollectionDocuments/kcc/img/application-details/statement.jpg' class='link external open-popup-image pxtm-click-openPopup' title='ผู้มีเงินออม - ตัวอย่างสำเนาการเดินบัญชี'>ตัวอย่างสำเนาการเดินบัญชี (Statement)</a>"
            ]
          }
        ],
        "remark": {
          "title": "หมายเหตุ :",
          "list": [
            "กรณีเดินบัญชีกับธนาคารกสิกรไทย ตั้งแต่ 6 เดือนขึ้นไป ไม่ต้องยื่นเอกสารแสดงรายได้"
          ]
        }
      }
    },
    {
      "id": "application-details-05",
      "qualification": {
        "left_col": [
          {
            "title": "อายุบัตรหลัก",
            "list": [
              "20-80 ปี"
            ]
          },
          {
            "title": "อายุบัตรเสริม",
            "list": [
              "15 ปี"
            ]
          }
        ],
        "right_col": [
          {
            "title": "คุณสมบัติอื่น",
            "list": [
              "ต้องมีเงินฝากออมทรัพย์และ/หรือเงินฝากประจำค้ำประกัน 15,000 บาทขึ้นไป"
            ]
          }
        ]
      },
      "document": {
        "left_col": [
          {
            "title": "เอกสารแสดงตัวตน",
            "list": [
              "สำเนาบัตรประชาชนที่ยังไม่หมดอายุ",
              "หนังสือเดินทางที่ยังไม่หมดอายุ (ต่างชาติ)",
              "เอกสารวีซ่าที่ยังไม่หมดอายุ (ต่างชาติ)"
            ]
          }
        ],
        "right_col": [
          {
            "title": "เอกสารแสดงรายได้",
            "list": [
              "สำเนาสมุดบัญชีเงินฝากประจำ / ออมทรัพย์ ธนาคารกสิกรไทยที่จะนำมาเป็นหลักประกัน",
              "สัญญาจำนำสิทธิ์บัญชีเงินฝาก"
            ]
          }
        ]
      }
    }
  ]
};

$(function () {
  $(window).on("tabready", function (e) {
    $(".tab-container-rv").each(function () {
      var tab = $(this).find(".tab-rv"),
      tabContent = $(this).find(".tab-content-rv");

      var item = tab.find("a");

      tab.on("click", "a", function (e) {
        e.preventDefault();

        item.removeClass("active");
        $(this).addClass("active");

        var tabAttr = $(this).attr("href");

        tabContent.removeClass("active");
        $(tabAttr).addClass("active");

        $(window).trigger("compn-rewidth");
      });
    });
  });
  
  var d = APP_DETAIL;

  if (d) {
    if (d.tabs) {
      for (var i = 0; i < d.tabs.length; i++) {
        var item = d.tabs[i];
        var a = $(document.createElement("a")).prop("href", item.target).html(item.label);

        a.attr("title", "appication details tab - " + item.label).addClass("pxtm-click-toggleDetail");

        if (i === 0) {
          a.addClass("active");
        }

        $("#application-details .tab-rv").append(a);
      }
    }

    if (d.contents) {
      for (var i = 0; i < d.contents.length; i++) {
        var item = d.contents[i];

        var head = $(document.createElement("div")).prop("id", item.id).addClass("tab-content-rv");
        var rowQualification = $(document.createElement("div")).addClass("row qualification-content");
        var rowDocumentation = $(document.createElement("div")).addClass("row document-content");

        // qualification
        var title = $(document.createElement("div")).addClass("sc-headline hidden-w1023").append($(document.createElement("h3")).html("คุณสมบัติ"));
        var leftCol = $(document.createElement("div")).addClass("col col-md-6 col-xs-12 entry-content");

        rowQualification.append(title)

        for (var j = 0; j < item.qualification.left_col.length; j++) {
          var token = createList(item.qualification.left_col[j].title, item.qualification.left_col[j].list);
          leftCol.append(token.title).append(token.list);
        }

        rowQualification.append(leftCol);

        var rightCol = $(document.createElement("div")).addClass("col col-md-6 col-xs-12 entry-content");

        for (var j = 0; j < item.qualification.right_col.length; j++) {
          var token = createList(item.qualification.right_col[j].title, item.qualification.right_col[j].list);
          rightCol.append(token.title).append(token.list);
        }

        rowQualification.append(rightCol);

        if (item.qualification.remark) {
          var remark = $(document.createElement("div")).addClass("display-7 font-default");
          remark.append($(document.createElement("strong")).html(item.qualification.remark.title));

          var remarkList = $(document.createElement("ul"));

          for (var j = 0; j < item.qualification.remark.list.length; j++) {
            remarkList.append($(document.createElement("li")).html(item.qualification.remark.list[j]));
          }

          rowQualification.append(remark).append(remarkList);
        }

        head.append(rowQualification);

        // documentation
        title = $(document.createElement("div")).addClass("sc-headline hidden-w1023").append($(document.createElement("h3")).html("เอกสารประกอบการสมัคร"));
        leftCol = $(document.createElement("div")).addClass("col col-md-6 col-xs-12 entry-content");

        rowDocumentation.append(title)

        for (var j = 0; j < item.document.left_col.length; j++) {
          var token = createList(item.document.left_col[j].title, item.document.left_col[j].list);
          leftCol.append(token.title).append(token.list);
        }

        rowDocumentation.append(leftCol);

        rightCol = $(document.createElement("div")).addClass("col col-md-6 col-xs-12 entry-content");

        for (var j = 0; j < item.document.right_col.length; j++) {
          var token = createList(item.document.right_col[j].title, item.document.right_col[j].list);
          rightCol.append(token.title).append(token.list);
        }

        rowDocumentation.append(rightCol);

        if (item.document.remark) {
          var col12 = $(document.createElement("div")).addClass("col col-xs-12 entry-content pl-0 mt-10");

          var remark = $(document.createElement("p")).addClass("display-7 font-default");
          remark.append($(document.createElement("strong")).html(item.document.remark.title));

          var remarkList = $(document.createElement("ul"));

          for (var j = 0; j < item.document.remark.list.length; j++) {
            remarkList.append($(document.createElement("li")).addClass("display-7").html(item.document.remark.list[j]));
          }

          col12.append(remark).append(remarkList);
          rowDocumentation.append(col12);
        }

        head.append(rowDocumentation);

        if (i === 0) {
          head.addClass("active");
        }

        $("#application-details .tab-container-rv").append(head);

        function createList (title, list) {
          title = title || "Untitled";
          list = list || [];

          var h4 = $(document.createElement("h4")).addClass("h5").html(title);
          var ul = $(document.createElement("ul"));

          for (var i = 0; i < list.length; i++) {
            ul.append($(document.createElement("li")).html(list[i]));
          }

          return {
            "title": h4,
            "list": ul
          };
        }
      }
    }

    $(window).trigger("tabready");

    $("#application-details .tab-container-rv .open-popup-image").magnificPopup({
      type: "image",
      preloader: false,
      closeOnContentClick: true,
      mainClass: "popup-image-style"
    });
  }
});